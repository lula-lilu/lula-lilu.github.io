<!doctype html>



  


<html class="theme-next mist use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Python," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="学习资源: 《面向ArcGIS的Python脚本编程》英文版更详细  Python Scripting for ArcGIS练习数据和资源 Esri官方资源

书一共分为四部分，第一部分是Python和地理处理的相关概念（第一章到第四章），第二部分是编写地理处理脚本（第五章到第九章），第三部分是执行地理处理任务（第十章到第十二章），最后一部分是 创建并使用脚本工具（十三到十四章）。核心主要是第二">
<meta property="og:type" content="article">
<meta property="og:title" content="面向ArcGIS的Python脚本编程笔记">
<meta property="og:url" content="http://lula-lilu.github.io/2017/03/22/面向ArcGIS的Python脚本编程笔记/index.html">
<meta property="og:site_name" content="lula">
<meta property="og:description" content="学习资源: 《面向ArcGIS的Python脚本编程》英文版更详细  Python Scripting for ArcGIS练习数据和资源 Esri官方资源

书一共分为四部分，第一部分是Python和地理处理的相关概念（第一章到第四章），第二部分是编写地理处理脚本（第五章到第九章），第三部分是执行地理处理任务（第十章到第十二章），最后一部分是 创建并使用脚本工具（十三到十四章）。核心主要是第二">
<meta property="og:image" content="http://img.blog.csdn.net/20170529130951257?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170529131107569?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170529230535949?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170530141922616?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:image" content="http://img.blog.csdn.net/20170530170151704?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">
<meta property="og:updated_time" content="2017-07-11T02:47:44.665Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="面向ArcGIS的Python脚本编程笔记">
<meta name="twitter:description" content="学习资源: 《面向ArcGIS的Python脚本编程》英文版更详细  Python Scripting for ArcGIS练习数据和资源 Esri官方资源

书一共分为四部分，第一部分是Python和地理处理的相关概念（第一章到第四章），第二部分是编写地理处理脚本（第五章到第九章），第三部分是执行地理处理任务（第十章到第十二章），最后一部分是 创建并使用脚本工具（十三到十四章）。核心主要是第二">
<meta name="twitter:image" content="http://img.blog.csdn.net/20170529130951257?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Mist',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: undefined,
      author: 'Author'
    }
  };
</script>




  <link rel="canonical" href="http://lula-lilu.github.io/2017/03/22/面向ArcGIS的Python脚本编程笔记/"/>

  <title> 面向ArcGIS的Python脚本编程笔记 | lula </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">lula</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle"></p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                面向ArcGIS的Python脚本编程笔记
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2017-03-22T20:12:00+08:00" content="2017-03-22">
              2017-03-22
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/GIS/" itemprop="url" rel="index">
                    <span itemprop="name">GIS</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <blockquote>
<p>学习资源: <a href="https://www.amazon.cn/%E9%9D%A2%E5%90%91ArcGIS%E7%9A%84Python%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B-%E8%B5%9E%E5%BE%B7%E4%BC%AF%E6%A0%B9/dp/B00OZVSIYU/ref=pd_lpo_sbs_14_t_1?ie=UTF8&amp;psc=1&amp;refRID=VXT2J9QECQG28GDSKE9B" target="_blank" rel="external">《面向ArcGIS的Python脚本编程》</a><br>英文版更详细  <a href="https://www.amazon.cn/Python-Scripting-for-ArcGIS-Zandbergen-Paul-A/dp/1589482824/ref=pd_lpo_sbs_14_t_2?ie=UTF8&amp;psc=1&amp;refRID=VXT2J9QECQG28GDSKE9B" target="_blank" rel="external">Python Scripting for ArcGIS</a><br>练习数据和资源 <a href="http://esripress.esri.com/bookResources/index.cfm?event=catalog.book&amp;id=9" target="_blank" rel="external">Esri官方资源</a></p>
</blockquote>
<p>书一共分为四部分，第一部分是Python和地理处理的相关概念（第一章到第四章），第二部分是编写地理处理脚本（第五章到第九章），第三部分是执行地理处理任务（第十章到第十二章），最后一部分是 创建并使用脚本工具（十三到十四章）。核心主要是第二部分。</p>
<a id="more"></a>
<h1 id="part-2-writing-scripts"><a href="#Part-2-Writing-Scripts" class="headerlink" title="Part 2 Writing Scripts"></a>Part 2 Writing Scripts</h1><h2 id="chapter-5-geoprocessing-using-python"><a href="#Chapter-5-Geoprocessing-using-Python" class="headerlink" title="Chapter 5 Geoprocessing using Python"></a>Chapter 5 Geoprocessing using Python</h2><h3 id="引用工具函数的两种方法推荐第一种"><a href="#引用工具函数的两种方法（推荐第一种）" class="headerlink" title="引用工具函数的两种方法（推荐第一种）"></a>引用工具函数的两种方法（推荐第一种）</h3><p><img src="http://img.blog.csdn.net/20170529130951257?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="跳过可选参数的三种方法"><a href="#跳过可选参数的三种方法" class="headerlink" title="跳过可选参数的三种方法"></a>跳过可选参数的三种方法</h3><p><img src="http://img.blog.csdn.net/20170529131107569?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="设置工作空间和环境"><a href="#设置工作空间和环境" class="headerlink" title="设置工作空间和环境"></a>设置工作空间和环境</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; from arcpy import env</div><div class="line">&gt;&gt;&gt; env.workspace = &quot;C:/EsriPress/Python/Data/Exercise05&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; env.overwriteOutput = True</div><div class="line">&gt;&gt;&gt; env.outputCoordinateSystem = spatial_ref</div></pre></td></tr></table></figure>
<h3 id="坐标系类spatialreference类"><a href="#坐标系类（SpatialReference类）" class="headerlink" title="坐标系类（SpatialReference类）"></a>坐标系类（SpatialReference类）</h3><p>需要实例化之后使用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; prjFile = &quot;C:/EsriPress/Python/Data/Exercise05/facilities.prj&quot;</div><div class="line">&gt;&gt;&gt; spatial_ref = arcpy.SpatialReference(prjFile)</div><div class="line">&gt;&gt;&gt; arcpy.DefineProjection_management(&quot;hospitals&quot;, spatial_ref)</div><div class="line">The result is &lt;Result &apos;hospitals&apos;&gt;.</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; print spatial_ref.name</div><div class="line">The result is </div><div class="line">NAD_1983_StatePlane_Texas_Central_FIPS_4203_Feet</div></pre></td></tr></table></figure>
<h3 id="显示工具的提示信息"><a href="#显示工具的提示信息" class="headerlink" title="显示工具的提示信息"></a>显示工具的提示信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">arcpy.Clip_analysis(&quot;parks.shp&quot;, &quot;zip.shp&quot;, &quot;Results/parks_Clip.shp&quot;)</div><div class="line">print arcpy.GetMessages()</div><div class="line"># 输出所有的提示信息</div><div class="line">msgCount = arcpy.GetMessageCount()</div><div class="line">print arcpy.GetMessage(msgCount-1)</div><div class="line"># 输出指定的提示信息</div></pre></td></tr></table></figure>
<h2 id="chapter-6-exploring-spatial-data"><a href="#Chapter-6-Exploring-spatial-data" class="headerlink" title="Chapter 6 Exploring spatial data"></a>Chapter 6 Exploring spatial data</h2><h3 id="使用工具前判断文件是否存在arcpyexists"><a href="#使用工具前判断文件是否存在（arcpy-exists）" class="headerlink" title="使用工具前判断文件是否存在（arcpy.exists）"></a>使用工具前判断文件是否存在（arcpy.exists）</h3><p>python自带的函数os.path.exist函数主要是判断文件是否存在，也就是必须要写出完整文件的后缀名，而Arcpy中的exists函数则是可以对不同类别的要素进行判断是否存在。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;C:/EsriPress/Python/Data/Exercise06&quot;</div><div class="line">if arcpy.Exists(&quot;cities.shp&quot;):</div><div class="line">	arcpy.CopyFeatures_management(&quot;cities.shp&quot;, &quot;results/cities_copy.shp&quot;)</div></pre></td></tr></table></figure>
<h3 id="判断数据类型describe"><a href="#判断数据类型（Describe）" class="headerlink" title="判断数据类型（Describe）"></a>判断数据类型（Describe）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">type = arcpy.Describe(&quot;cities.shp&quot;).shapeType</div><div class="line">if type == &quot;Polygon&quot;:</div><div class="line">	# 需要使用的函数</div><div class="line">else:</div><div class="line">	print &quot;The feature are not polygons&quot;</div></pre></td></tr></table></figure>
<p>数据库中的数据类型非常重要，因为数据库中的户数据元素没有文件扩展名。<br>文件地理数据库后缀名 .gdb<br>个人地理数据库后缀名.mdb<br>企业地理数据库后缀名.sde<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt;import arcpy</div><div class="line">&gt;&gt;&gt;element = &quot;C:/Data/study.gdb/final&quot;</div><div class="line">&gt;&gt;&gt;desc = arcpy.Describe(element)</div><div class="line">&gt;&gt;&gt; arcpy.Describe(element).datasetType</div><div class="line">u&apos;FeatureClass&apos;</div><div class="line">&gt;&gt;&gt; arcpy.Describe(element).ShapeType</div><div class="line">u&apos;Point&apos;</div></pre></td></tr></table></figure></p>
<p>Describe函数返回一个具有很多属性的Describe对象，包含文件路径、目录、路径、文件名称等属性。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; mylayer = arcpy.Describe(&quot;cities&quot;)</div><div class="line">&gt;&gt;&gt; mylayer.dataType</div><div class="line">#Running the code returns u&apos;FeatureLayer&apos;.</div><div class="line">&gt;&gt;&gt; mylayer.shapeType</div><div class="line">The result is u&apos;Point&apos;.</div><div class="line">----------</div><div class="line">&gt;&gt;&gt; mylayer.spatialReference.name</div><div class="line">The result is u&apos;GCS_North_American_1983&apos;.</div><div class="line">&gt;&gt;&gt; mylayer.spatialReference.type</div><div class="line">The result is u&apos;Geographic&apos;.</div><div class="line">&gt;&gt;&gt; mylayer.spatialReference.domain</div><div class="line">The result is u&apos;-400 -400 400 400&apos;.</div></pre></td></tr></table></figure>
<h3 id="列表批处理"><a href="#列表批处理" class="headerlink" title="列表批处理"></a>列表批处理</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;C:/Data&quot;</div><div class="line"># 列出目录下所有文件名</div><div class="line">fclist  =  arcpy.ListFeatureClasses( )</div><div class="line">print fclist</div><div class="line"># [u&apos;floodzone.shp&apos;, u&apos;roads.shp&apos;, u&apos;streams.shp&apos;, u&apos;wetlands.shp&apos;, u&apos;zipcodes.shp&apos;]</div><div class="line"># 列出以w开头的文件名</div><div class="line">fclist  =  arcpy.ListFeatureClasses( &quot;w*&quot; ）</div><div class="line"># 列出点要素</div><div class="line">fclist = arcpy.ListFeatureClasses( &quot;&quot;, &quot;point&quot; )</div><div class="line"># 列出栅格数据</div><div class="line">rasterlist = arcpy.ListRasters( &quot;&quot;, &quot;tif&quot; ）</div></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> arcpy</div><div class="line"><span class="keyword">from</span> arcpy <span class="keyword">import</span> env</div><div class="line">env.workspace = <span class="string">"D:/Archive01/03Coding/ArcGIS+Python/EsriPress/Python/Data/Exercise06"</span></div><div class="line">fc_list = arcpy.ListFeatureClasses()</div><div class="line"><span class="keyword">for</span> fc <span class="keyword">in</span> fc_list:</div><div class="line">    desc = arcpy.Describe(fc)</div><div class="line">    <span class="keyword">print</span> desc.basename + <span class="string">"is a "</span> + desc.shapeType +<span class="string">"feature class."</span></div><div class="line"><span class="comment">#另外一种 print "&#123;0&#125; is a &#123;1&#125; feature class".format(desc.basename, desc.shapeType)</span></div></pre></td></tr></table></figure>
<h3 id="列表元组和字典"><a href="#列表元组和字典" class="headerlink" title="列表元组和字典"></a>列表元组和字典</h3><p>元组不可修改，元组为()，列表为[]，字典{}，引用是均用[]</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cities = [&quot;Austin&quot;, &quot;Baltimore&quot;, &quot;Cleveland&quot;, &quot;Denver&quot;]</div><div class="line">states = [&quot;Texas&quot;, &quot;Maryland&quot;, &quot;Ohio&quot;, &quot;Colorado&quot;]</div><div class="line">&gt;&gt;&gt;  states[cities.index( &quot;Cleveland&quot; )]</div></pre></td></tr></table></figure>
<p>或者直接用字典查询<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;&gt;&gt; statelookup = &#123;&quot;Austin&quot;: &quot;Texas&quot;, &quot;Baltimore&quot;: &quot;Maryland&quot;, &quot;Cleveland&quot;: &quot;Ohio&quot;, &quot;Denver&quot;: &quot;Colorado&quot;&#125;</div><div class="line">&gt;&gt;&gt; statelookup[&quot;Cleveland&quot;]</div><div class="line">&gt;&gt;&gt; statelookup.key()</div><div class="line">&gt;&gt;&gt; statelookup.values()</div><div class="line"># 以列表的形式返回</div><div class="line">&gt;&gt;&gt;  zoning.items( )</div><div class="line">The result is [( &apos;IND&apos;,  &apos;Industrial&apos; ),  ( &apos;RES&apos;,  &apos;Residential&apos; )].</div></pre></td></tr></table></figure></p>
<h2 id="chapter-7-manipulating-spatial-dataarcpyda"><a href="#Chapter-7-Manipulating-spatial-data-Arcpy-da" class="headerlink" title="Chapter 7 Manipulating spatial data(Arcpy.da)"></a>Chapter 7 Manipulating spatial data(Arcpy.da)</h2><p>游标实际上就是类似SQL的一种查询功能，或者说条件筛选。通过游标搜索得到的记录会输出到一个字段列表中。<br><img src="http://img.blog.csdn.net/20170529230535949?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<ul>
<li>SearchCursor 搜索游标检索行</li>
<li>InsertCursor 插入行</li>
<li>UpdateCursor 更新和删除行</li>
</ul>
<h3 id="搜索游标"><a href="#搜索游标" class="headerlink" title="搜索游标"></a>搜索游标</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;D:/Archive01/03Coding/ArcGIS+Python/EsriPress/Python/Data/Exercise07&quot;</div><div class="line"></div><div class="line">fc = &quot;airports.shp&quot;</div><div class="line">cursor = arcpy.da.SearchCursor(fc,[&quot;NAME&quot;])</div><div class="line">for row in cursor:</div><div class="line">    print &quot;Airport name = &#123;0&#125;&quot;.format(row[0])</div><div class="line">del row</div><div class="line">del cursor  </div><div class="line"># Airport name = New Stuyahok</div><div class="line"># Airport name = Ted Stevens Anchorage International</div><div class="line"># Airport name = Iliamna</div><div class="line"># Airport name = Koyukuk</div></pre></td></tr></table></figure>
<hr>
<ul>
<li>使用with，无论游标成功运行还是出现异常，都可以保证数据库锁的关闭和释放，并重新迭代<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">fc = &quot;C:/Data/study.gdb/roads&quot;</div><div class="line">with arcpy.da.SearchCursor( fc, [&quot;STREETNAME&quot;] ) as cursor:</div><div class="line">	for row in cursor:</div><div class="line">		print &quot;Streetname = &#123;0&#125;&quot;.format( row[0] )</div></pre></td></tr></table></figure>
</li>
</ul>
<hr>
<ul>
<li>SQL语句中，字段格式有(“”)([])，AddFieldDelimiters函数<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cursor = arcpy.da.SearchCursor(fc, [&quot;NAME&quot;], &apos;&quot;TOT_ENP&quot; &gt; 100000&apos;)</div><div class="line">cursor = arcpy.da.SearchCursor(fc,[&quot;NAME&quot;],&apos;&quot;NAME&quot; = \&apos;Ketchikan\&apos;&apos;)</div><div class="line">cursor = arcpy.da.SearchCursor(fc, [&quot;NAME&quot;], &apos;&quot;FEATURE&quot; = \&apos;Seaplane Base\&apos;&apos;)</div><div class="line"># 注意此时对于条件的书写，不同的文件由不同的格式</div><div class="line">delimitedField = arcpy.AddFieldDelimiters(fc, &quot;COUNTY&quot;)</div><div class="line">cursor = arcpy.da.SearchCursor(fc, [&quot;NAME&quot;], delimitedField + &quot; = &apos;Anchorage Borough&apos;&quot;)</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="插入游标"><a href="#插入游标" class="headerlink" title="插入游标"></a>插入游标</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;C:/EsriPress/Python/Data/Exercise07&quot;</div><div class="line">fc = &quot;Results/airportsCopy.shp&quot;</div><div class="line">cursor = arcpy.da.InsertCursor(fc, &quot;NAME&quot;)</div><div class="line">cursor.insertRow([&quot;New Airport&quot;])</div><div class="line">del cursor</div></pre></td></tr></table></figure>
<h4 id="更新游标"><a href="#更新游标" class="headerlink" title="更新游标"></a>更新游标</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;C:/EsriPress/Python/Data/Exercise07&quot;</div><div class="line">fc = &quot;Results/airports.shp&quot;</div><div class="line">delimfield = arcpy.AddFieldDelimiters(fc, &quot;STATE&quot;)</div><div class="line">cursor = arcpy.da.UpdateCursor(fc, [&quot;STATE&quot;], delimfield + &quot; &lt;&gt; &apos;AK&apos;&quot;)</div><div class="line">for row in cursor:</div><div class="line">    row[0] = &quot;AK&quot;</div><div class="line">    cursor.updateRow(row)</div><div class="line">del row</div><div class="line">del cursor</div><div class="line"># 删除</div><div class="line">fc = &quot;Results/airports.shp&quot;</div><div class="line">cursor = arcpy.da.UpdateCursor(fc, [&quot;TOT_ENP&quot;])</div><div class="line">for row in cursor:</div><div class="line">    if row[0] &lt; 100000:</div><div class="line">        cursor.deleteRow()</div><div class="line">del row</div><div class="line">del cursor</div></pre></td></tr></table></figure>
<h3 id="表和字段"><a href="#表和字段" class="headerlink" title="表和字段"></a>表和字段</h3><ul>
<li>ValidateTableName( name,  {workspace} ）将无效字符替换为下划线(_)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"># 将shp文件转移到地理数据库</div><div class="line">import arcpy</div><div class="line">import os</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;C:/Data&quot;</div><div class="line">outworkspace = &quot;C:/Data/test/study.gdb&quot;</div><div class="line">fclist  =  arcpy.ListFeatureClasses( )</div><div class="line">for shapefile in fclist:</div><div class="line">	fcname  =  arcpy.Describe( shapefile ).basename</div><div class="line">	newfcname  =  arcpy.ValidateTableName( fcname )</div><div class="line">	outfc = os.path.join( outworkspace, newfcname )</div><div class="line">	arcpy.CopyFeatures_management( shapefile,  outfc)</div></pre></td></tr></table></figure>
<hr>
<ul>
<li>新增字段检测<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;C:/EsriPress/Python/Data/Exercise07&quot;</div><div class="line">fc = &quot;Results/airports.shp&quot;</div><div class="line">newfield = &quot;NEW CODE&quot;</div><div class="line">fieldtype = &quot;TEXT&quot;</div><div class="line">fieldname = arcpy.ValidateFieldName(newfield)</div><div class="line">fieldlist = arcpy.ListFields(fc)</div><div class="line">fieldnames = []</div><div class="line">for field in fieldlist:</div><div class="line">    fieldnames.append(field.name)</div><div class="line">    if fieldname not in fieldnames:</div><div class="line">        arcpy.AddField_management(fc, fieldname, fieldtype, &quot;&quot;, &quot;&quot;, 12)</div><div class="line">        print &quot;New field has been added.&quot;</div><div class="line">    else:</div><div class="line">        print &quot;Field name already exists.&quot;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="处理文本文件"><a href="#处理文本文件" class="headerlink" title="处理文本文件"></a>处理文本文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">f = open(&quot;D:/Archive01/03Coding/ArcGIS+Python/mytext.txt&quot;)</div><div class="line">f.read()#读取全部</div><div class="line">f.seek(0)</div><div class="line">f.read(5)</div><div class="line">f.readline()</div><div class="line">f.readlines()#以列表的形式返回所有的行</div><div class="line">f.close()</div><div class="line"># 写入行</div><div class="line">f= open(&quot;D:/Archive01/03Coding/ArcGIS+Python/mytext.txt&quot;,&quot;r+&quot;)</div><div class="line">f.write(&quot;Triangulated\nIrregular\nNode&quot; )</div><div class="line">f.read()</div><div class="line">f.close()</div><div class="line"># 修改指定行</div><div class="line">f= open(&quot;D:/Archive01/03Coding/ArcGIS+Python/mytext.txt&quot;,&quot;r+&quot;)</div><div class="line">lines = f.readlines()</div><div class="line">lines[2] = &quot;Network&quot;</div><div class="line">f.writelines(lines)</div><div class="line"># 遍历行</div><div class="line">f  =  open( &quot;C:/Data/mytext.txt&quot; )</div><div class="line">for line in f.readlines( ):</div><div class="line">    &lt;function&gt;</div><div class="line">f.close( )</div></pre></td></tr></table></figure>
<h2 id="chapter-8-working-with-geometries处理几何图形"><a href="#Chapter-8-Working-with-geometries（处理几何图形）" class="headerlink" title="Chapter 8 Working with geometries（处理几何图形）"></a>Chapter 8 Working with geometries（处理几何图形）</h2><p><strong>几何对象的属性</strong></p>
<ul>
<li><strong>SHAPE@XY</strong> will return a tuple of x,y coordinates representing the feature’s centroid</li>
<li><strong>SHAPE@LENGTH</strong> will return the feature’s length as a double</li>
<li><strong>SHAPE@</strong> will return the full geometry object</li>
</ul>
<h3 id="读取几何"><a href="#读取几何" class="headerlink" title="读取几何"></a>读取几何</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">import arcpy</div><div class="line">from arcpy import env</div><div class="line">env.workspace = &quot;D:/Archive01/03Coding/ArcGIS+Python/EsriPress/Python/Data/Exercise08&quot;</div><div class="line"># 求周长</div><div class="line">fc = &quot;rivers.shp&quot;</div><div class="line">cursor = arcpy.da.SearchCursor(fc, [&quot;SHAPE@LENGTH&quot;])</div><div class="line">length = 0</div><div class="line">for row in cursor:</div><div class="line">    length = length + row[0]</div><div class="line">units = arcpy.Describe(fc).spatialReference.linearUnitName</div><div class="line">print str(length) + &quot; &quot; + units</div><div class="line"># 输出XY坐标</div><div class="line">fc = &quot;dams.shp&quot;</div><div class="line">cursor = arcpy.da.SearchCursor(fc, [&quot;SHAPE@XY&quot;])</div><div class="line">for row in cursor:</div><div class="line">    x, y = row[0]</div><div class="line">    print(&quot;&#123;0&#125;, &#123;1&#125;&quot;.format(x, y))</div></pre></td></tr></table></figure>
<h3 id="读取线和面single-part"><a href="#读取线和面（single-part）" class="headerlink" title="读取线和面（single part）"></a>读取线和面（single part）</h3><ul>
<li>线和多边形，访问其中的每一个要素都会返回一个点对象组。想要处理这些数组，需要两次迭代，第一个for循环遍历行对象（即一条线和多边形记录），需要输入OID（对象标识符）字段，用来指明每一个点对象数组的起始位置和结束位置。访问每一个行对象都会获得一个几何对象，该对象是一个点对象数组。getPart函数可以用来获取几何图形的第一部分的点对象数组。第二个for循环用来遍历每一个线或多边形中的点，并输出x、y坐标值。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">fc = &quot;rivers.shp&quot;</div><div class="line">cursor = arcpy.da.SearchCursor(fc, ([&quot;OID@&quot;, &quot;SHAPE@&quot;]))</div><div class="line">for row in cursor:</div><div class="line">    print(&quot;Feature &#123;0&#125;: &quot;.format(row[0]))</div><div class="line">    for point in row[1].getPart(0):</div><div class="line">        print(&quot;&#123;0&#125;, &#123;1&#125;&quot;.format(point.X, point.Y))</div></pre></td></tr></table></figure>
<ul>
<li>注意到getPart()函数索引值为零，只返回几何对象的第一部分，对于singlepart要素类只有第一部分。如果没有索引值，则会返回一个包含所有点对象数组的数组。<h3 id="多要素点线面"><a href="#多要素（点线面）" class="headerlink" title="多要素（点线面）"></a>多要素（点线面）</h3><ul>
<li>多个要素只有一个字段表，</li>
</ul>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 判断要素类用shapeType属性，Point, Polyline, Polygon, MultiPoint, and MultiPatch（三维数据）几种返回值。</span></div><div class="line">fc = <span class="string">"Hawaii.shp"</span></div><div class="line"><span class="keyword">print</span> arcpy.Describe(fc).shapeType</div><div class="line"><span class="comment"># 判断属性</span></div><div class="line">fc = <span class="string">"Hawaii.shp"</span></div><div class="line">cursor = arcpy.da.SearchCursor(fc, [<span class="string">"OID@"</span>, <span class="string">"SHAPE@"</span>])</div><div class="line"><span class="keyword">for</span> row <span class="keyword">in</span> cursor:</div><div class="line">    <span class="keyword">if</span> row[<span class="number">1</span>].isMultipart:</div><div class="line">        print(<span class="string">"Feature &#123;0&#125; is multipart and has &#123;1&#125; parts."</span>.format(row[<span class="number">0</span>],str(row[<span class="number">1</span>].partCount)))</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        print(<span class="string">"Feature &#123;0&#125; is single part."</span>.format(row[<span class="number">0</span>]))</div></pre></td></tr></table></figure>
<ul>
<li>多边形要素类的xy点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">cursor = arcpy.da.SearchCursor(fc, [&quot;OID@&quot;, &quot;SHAPE@&quot;])</div><div class="line">for row in cursor:</div><div class="line">    print(&quot;Feature &#123;0&#125;: &quot;.format(row[0]))</div><div class="line">    partnum = 0</div><div class="line">    for part in row[1]:</div><div class="line">        print(&quot;Part &#123;0&#125;: &quot;.format(partnum))</div><div class="line">        for point in part:</div><div class="line">            print(&quot;&#123;0&#125;, &#123;1&#125;&quot;.format(point.X, point.Y))</div><div class="line">        partnum += 1</div></pre></td></tr></table></figure>
<h3 id="内环"><a href="#内环" class="headerlink" title="内环"></a>内环</h3><p><img src="http://img.blog.csdn.net/20170530141922616?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="写入几何图形"><a href="#写入几何图形" class="headerlink" title="写入几何图形"></a>写入几何图形</h3><ul>
<li>创建线文件</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment"># Write geometries</span></div><div class="line"><span class="keyword">import</span> fileinput</div><div class="line"><span class="keyword">import</span> string</div><div class="line"><span class="keyword">import</span> os</div><div class="line">env.overwriteOutput = <span class="keyword">True</span></div><div class="line">outpath = <span class="string">"D:/Archive01/03Coding/ArcGIS+Python/EsriPress/Python/Data/Exercise08"</span></div><div class="line">newfc = <span class="string">"Results/newpolyline.shp"</span></div><div class="line"><span class="comment"># 创建几何图形</span></div><div class="line">arcpy.CreateFeatureclass_management(outpath, newfc, <span class="string">"Polyline"</span>)</div><div class="line"><span class="comment"># 坐标点文件</span></div><div class="line">infile = <span class="string">"D:/Archive01/03Coding/ArcGIS+Python/EsriPress/Python/Data/Exercise08/coordinates.txt"</span></div><div class="line"><span class="comment"># </span></div><div class="line">cursor = arcpy.da.InsertCursor(newfc, [<span class="string">"SHAPE@"</span>])</div><div class="line">array = arcpy.Array()</div><div class="line"><span class="comment"># 第一种创建线文件</span></div><div class="line"><span class="comment"># 将文档中的内容分到ID，X,Y三个字段。</span></div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fileinput.input(infile):</div><div class="line">    ID, X, Y = string.split(line,<span class="string">" "</span>)</div><div class="line">    array.add(arcpy.Point(X, Y))</div><div class="line"><span class="comment"># 插入到新文件中</span></div><div class="line">cursor.insertRow([arcpy.Polyline(array)])</div><div class="line">fileinput.close()</div><div class="line"><span class="keyword">del</span> cursor</div><div class="line"><span class="comment"># 第二种创建面文件</span></div><div class="line">point = arcpy.Point( )</div><div class="line"><span class="keyword">for</span> line <span class="keyword">in</span> fileinput.input( infile ):</div><div class="line">    point.ID, point.X, point.Y = line.split( )</div><div class="line">    array.add(point)</div><div class="line">polygon = arcpy.Polygon(array)</div><div class="line">cursor.insertRow([polygon])</div><div class="line">fileinput.close()</div><div class="line"><span class="keyword">del</span> cursor</div></pre></td></tr></table></figure>
<h3 id="challenge"><a href="#challenge" class="headerlink" title="challenge"></a>challenge</h3><ul>
<li><p>通过坐标点创建</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">fc = &quot;newpoly2.shp&quot;</div><div class="line">arcpy.CreateFeatureclass_management(&quot;C:/Data&quot;, fc, &quot;Polygon&quot;)</div><div class="line">cursor = arcpy.da.InsertCursor(fc, [&quot;SHAPE@&quot;])</div><div class="line">array = arcpy.Array()</div><div class="line">coordlist =[[0, 0], [0, 1000], [1000, 1000], [1000, 0]]</div><div class="line"></div><div class="line">for x, y in coordlist:</div><div class="line">    point = arcpy.Point(x,y)</div><div class="line">    array.append(point)</div><div class="line">polygon = arcpy.Polygon(array)</div><div class="line">cursor.insertRow([polygon])</div><div class="line">del cursor</div></pre></td></tr></table></figure>
</li>
<li><p>统计每个singlepart的周长和面积</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">fc = &quot;Hawaii.shp&quot;</div><div class="line">newfc = &quot;Results/Hawaii_single.shp&quot;</div><div class="line">arcpy.MultipartToSinglepart_management(fc, newfc)</div><div class="line">spatialref = arcpy.Describe(newfc).spatialReference</div><div class="line">unit = spatialref.linearUnitName</div><div class="line">cursor = arcpy.da.SearchCursor(newfc, [&quot;SHAPE@&quot;])</div><div class="line">for row in cursor:</div><div class="line">    print (&quot;&#123;0&#125; &#123;1&#125;&quot;.format(row[0].length, unit))</div><div class="line">    print (&quot;&#123;0&#125; square &#123;1&#125;&quot;.format(row[0].area, unit))</div></pre></td></tr></table></figure>
<ul>
<li>创建最大长方形包围圈</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">fc = &quot;Hawaii.shp&quot;</div><div class="line">newfc = &quot;envelope8.shp&quot;</div><div class="line">desc = arcpy.Describe(fc)</div><div class="line">spatialref = desc.spatialReference</div><div class="line">extent = desc.extent</div><div class="line">arcpy.CreateFeatureclass_management(&quot;D:/Archive01/03Coding/ArcGIS+Python/EsriPress/Python/Data/Exercise08&quot;, newfc, &quot;Polygon&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, spatialref)</div><div class="line">cursor = arcpy.da.InsertCursor(newfc, [&quot;SHAPE@&quot;])</div><div class="line">array = arcpy.Array()</div><div class="line">array.append(extent.upperLeft)</div><div class="line">array.append(extent.upperRight)</div><div class="line">array.append(extent.lowerRight)</div><div class="line">array.append(extent.lowerLeft)</div><div class="line">polygon = arcpy.Polygon(array)</div><div class="line">cursor.insertRow([polygon])</div><div class="line">del cursor</div></pre></td></tr></table></figure>
<h2 id="chapter-9-working-with-rasters处理栅格图形-arcpysa"><a href="#Chapter-9-Working-with-rasters（处理栅格图形-Arcpy-sa）" class="headerlink" title="Chapter 9 Working with rasters（处理栅格图形 Arcpy.sa）"></a>Chapter 9 Working with rasters（处理栅格图形 Arcpy.sa）</h2><h3 id="listrasters"><a href="#ListRasters" class="headerlink" title="ListRasters"></a>ListRasters</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">rasterlist = arcpy.ListRasters(&quot;*&quot;,&quot;IMG&quot;)</div><div class="line">for raster in rasterlist:</div><div class="line">    print raster</div></pre></td></tr></table></figure>
<h3 id="栅格数据基本特征"><a href="#栅格数据基本特征" class="headerlink" title="栅格数据基本特征"></a>栅格数据基本特征</h3><p><img src="http://img.blog.csdn.net/20170530170151704?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGVlbG9vNjY2/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">raster = &quot;tm.img&quot;</div><div class="line"></div><div class="line">desc = arcpy.Describe(raster)</div><div class="line"></div><div class="line">print &quot;Raster base name is: &quot; + desc.basename</div><div class="line">print &quot;Raster data type is: &quot; + desc.dataType</div><div class="line">print &quot;Raster file extension is: &quot; + desc.extension</div><div class="line">print &quot;Raster spatial reference is: &quot; + desc.spatialReference.name</div><div class="line">print &quot;Raster format is: &quot; + desc.format</div><div class="line">print &quot;Raster compression type is: &quot; + desc.compressionType</div><div class="line">print &quot;Raster number of bands is: &quot; + str(desc.bandCount)</div><div class="line">print &quot;Raster meanCellHeight is: &quot; + desc.meanCellHeight</div><div class="line">print &quot;Raster meanCellWidth is: &quot; + desc.meanCellWidth</div><div class="line"># 输出栅格图层的基本属性</div></pre></td></tr></table></figure></p>
<h3 id="处理栅格对象"><a href="#处理栅格对象" class="headerlink" title="处理栅格对象"></a>处理栅格对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># 引入栅格数据，之后进行计算</div><div class="line">elevraster = arcpy.Raster(&quot;elevation&quot;)</div><div class="line">outraster3 = elevraster * 3.281</div><div class="line">outraster3.save(&quot;elev_ft&quot;)</div><div class="line"># 使用工具</div><div class="line">outraster = arcpy.sa.Slope(&quot;elevation&quot;)</div><div class="line">outraster2 = arcpy.sa.Aspect(&quot;elevation&quot;)</div><div class="line">outraster.save(&quot;Aspect&quot;)</div><div class="line"># 多图层计算</div><div class="line">elev = arcpy.Raster(&quot;elevation&quot;)</div><div class="line">lc = arcpy.Raster(&quot;landcover.tif&quot;)</div><div class="line">slope = Slope(elev)</div><div class="line">aspect = Aspect(elev)</div><div class="line">goodslope = ((slope &gt; 5) &amp; (slope &lt; 20))</div><div class="line">goodaspect = ((aspect &gt; 150) &amp; (aspect &lt; 270))</div><div class="line">goodland = ((lc == 41) | (lc == 42) | (lc ==43))</div><div class="line">outraster = (goodslope &amp; goodaspect &amp; goodland)</div><div class="line">outraster.save(&quot;C:/EsriPress/Python/Data/Exercise09/Results/final&quot;)</div></pre></td></tr></table></figure>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Python/" rel="tag">#Python</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/22/R语言地图可视化(ggmap,rvest)/" rel="next" title="R语言地图可视化(ggmap,rvest)">
                <i class="fa fa-chevron-left"></i> R语言地图可视化(ggmap,rvest)
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2017/05/01/简单爬虫工具与可视化(WebScraper)/" rel="prev" title="简单爬虫工具与可视化(WebScraper)">
                简单爬虫工具与可视化(WebScraper) <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/avatar.jpg"
               alt="lula" />
          <p class="site-author-name" itemprop="name">lula</p>
          <p class="site-description motion-element" itemprop="description"></p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">11</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">5</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/lula-lilu" target="_blank" title="github">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  github
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.douban.com/people/59715677/" target="_blank" title="douban">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  douban
                </a>
              </span>
            
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#part-2-writing-scripts"><span class="nav-number">1.</span> <span class="nav-text">Part 2 Writing Scripts</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-5-geoprocessing-using-python"><span class="nav-number">1.1.</span> <span class="nav-text">Chapter 5 Geoprocessing using Python</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#引用工具函数的两种方法推荐第一种"><span class="nav-number">1.1.1.</span> <span class="nav-text">引用工具函数的两种方法（推荐第一种）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#跳过可选参数的三种方法"><span class="nav-number">1.1.2.</span> <span class="nav-text">跳过可选参数的三种方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#设置工作空间和环境"><span class="nav-number">1.1.3.</span> <span class="nav-text">设置工作空间和环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#坐标系类spatialreference类"><span class="nav-number">1.1.4.</span> <span class="nav-text">坐标系类（SpatialReference类）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#显示工具的提示信息"><span class="nav-number">1.1.5.</span> <span class="nav-text">显示工具的提示信息</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-6-exploring-spatial-data"><span class="nav-number">1.2.</span> <span class="nav-text">Chapter 6 Exploring spatial data</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用工具前判断文件是否存在arcpyexists"><span class="nav-number">1.2.1.</span> <span class="nav-text">使用工具前判断文件是否存在（arcpy.exists）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断数据类型describe"><span class="nav-number">1.2.2.</span> <span class="nav-text">判断数据类型（Describe）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表批处理"><span class="nav-number">1.2.3.</span> <span class="nav-text">列表批处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#列表元组和字典"><span class="nav-number">1.2.4.</span> <span class="nav-text">列表元组和字典</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-7-manipulating-spatial-dataarcpyda"><span class="nav-number">1.3.</span> <span class="nav-text">Chapter 7 Manipulating spatial data(Arcpy.da)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#搜索游标"><span class="nav-number">1.3.1.</span> <span class="nav-text">搜索游标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#插入游标"><span class="nav-number">1.3.2.</span> <span class="nav-text">插入游标</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#更新游标"><span class="nav-number">1.3.2.1.</span> <span class="nav-text">更新游标</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#表和字段"><span class="nav-number">1.3.3.</span> <span class="nav-text">表和字段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理文本文件"><span class="nav-number">1.3.4.</span> <span class="nav-text">处理文本文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-8-working-with-geometries处理几何图形"><span class="nav-number">1.4.</span> <span class="nav-text">Chapter 8 Working with geometries（处理几何图形）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#读取几何"><span class="nav-number">1.4.1.</span> <span class="nav-text">读取几何</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#读取线和面single-part"><span class="nav-number">1.4.2.</span> <span class="nav-text">读取线和面（single part）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多要素点线面"><span class="nav-number">1.4.3.</span> <span class="nav-text">多要素（点线面）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#内环"><span class="nav-number">1.4.4.</span> <span class="nav-text">内环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#写入几何图形"><span class="nav-number">1.4.5.</span> <span class="nav-text">写入几何图形</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#challenge"><span class="nav-number">1.4.6.</span> <span class="nav-text">challenge</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#chapter-9-working-with-rasters处理栅格图形-arcpysa"><span class="nav-number">1.5.</span> <span class="nav-text">Chapter 9 Working with rasters（处理栅格图形 Arcpy.sa）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#listrasters"><span class="nav-number">1.5.1.</span> <span class="nav-text">ListRasters</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#栅格数据基本特征"><span class="nav-number">1.5.2.</span> <span class="nav-text">栅格数据基本特征</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#处理栅格对象"><span class="nav-number">1.5.3.</span> <span class="nav-text">处理栅格对象</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lula</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Mist
  </a>
</div>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>

<span id="busuanzi_container_site_uv">
  你是第<span id="busuanzi_value_site_uv"></span>个访问本站的人
</span>
        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
